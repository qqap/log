<link rel="stylesheet" href="../style.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../default.css">
<script src="../highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<title>Theming in Chromium</title>

<div class="main">
<h1>Theming in Chromium</h1>

<style type="text/css">
mark {
    background:yellow;
    color:gray;
}
mark span {
    background:inherit;
    color:inherit;
}
</style>

<p>Commit <code>22be531a290d556fda7fa1b42d714265142cae55</code> 

how does gclient and fetch work, git inside, python based. also potentially possible with just a chrome extension, not too sophisticated. safari style, just a simple code hijack. almost 100GB of storage and a couple of days to clone and compile it the first time. the dev builds are quite slow to run as well, a somewhat tradeoff between  

</p>

<pre><code>absl::optional<SkColor> BrowserFrame::GetUserColor() const {

#if BUILDFLAG(IS_CHROMEOS_ASH)
  // ChromeOS SystemWebApps use the OS theme all the time.
  if (ash::IsSystemWebApp(browser_view_->browser())) {
    return views::Widget::GetUserColor();
  }
#endif  // BUILDFLAG(IS_CHROMEOS_ASH)

  // Incognito profiles should always fall back to the material baseline.
  if (IsIncognitoBrowser()) {
    return absl::nullopt;
  }
  
++   content::WebContents* web_contents = browser_view_->browser()->tab_strip_model()->GetActiveWebContents();
++   
++   if (web_contents) {
++       absl::optional<SkColor> color = web_contents->GetThemeColor();
++       if (color){
++           if (color.has_value()) {
++               LOG(INFO) << "theme-color: " << std::hex << color.value() << std::setw(6) << std::setfill('0');
++               return SkColorSetA(color.value(), SK_AlphaOPAQUE);
++           }
++       }
++   }

  const auto* theme_service =
      ThemeServiceFactory::GetForProfile(browser_view_->browser()->profile());
  return theme_service->UsingAutogeneratedTheme()
             ? absl::optional<SkColor>(
                   theme_service->GetAutogeneratedThemeColor())
             : views::Widget::GetUserColor();
}</code></pre>
</div>